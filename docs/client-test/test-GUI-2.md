# EasyTier GUI 第二次测试

| 测试者   | J                                            |
| -------- | ------------------------------------------------- |
| 测试时间 | 5 月 30 日                                           |
| 测试主题 | GUI 连接过程中更改设置，仪表盘流量测试，手机端测试 |

## 连接过程更改最大连接数测试

测例 1: 两个主机连接同一个虚拟网络，在连接过程中减少最大连接数为 1，查看是否能够正常随机踢出一台主机并且能否连接虚拟网络

* 网络名称: abc
* 网络密码: abcd1234
* 开启 DHCP: ON
* 网络方式: 手动 tcp://baka9.vip:60002
* 预期状态: 结论是能够正常踢出一台主机，并且连接虚拟网络失败
* 实际结果: 主机能连接到虚拟网络，成功分配 IP 地址，更改最大连接数之后，能够正常踢出一台主机，并且连接虚拟网络失败

![image-20250608165546200](/assets/test-GUI-2/image-20250608165546200.png) 

测例 2: 两个主机连接同一个虚拟网络，在连接过程中增大最大连接数，查看是否能够正常连接虚拟网络

* 网络名称: abc
* 网络密码: abcd1234
* 开启 DHCP: ON
* 网络方式: 手动 tcp://baka9.vip:60002
* 预期状态: 结论是能够正常连接
* 实际结果: 主机能连接到虚拟网络，成功分配 IP 地址，更改最大连接数之后，能够正常连接且能够正常连接虚拟网络

![image-20250608165636907](/assets/test-GUI-2/image-20250608165636907.png)

## 连接虚拟网络后停用虚拟网络测试

测例 1: 两个主机连接同一个虚拟网络，在连接过程中停用虚拟网络，查看是否能够正常连接

* 网络名称: abc
* 网络密码: abcd1234
* 开启 DHCP: ON
* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 停用之后主机无法连接到虚拟网络，且连接虚拟网络失败

* 实际结果: 停用之后主机无法连接到虚拟网络，且无法连接虚拟网络，但是两个主机的 GUI 可能会出现连接数为 1 或者之间连接数之间跳，连接虚拟网络失败。

![image-20250608165742117](/assets/test-GUI-2/image-20250608165742117.png)

![image-20250608165745189](/assets/test-GUI-2/image-20250608165745189.png)

![image-20250608165749230](/assets/test-GUI-2/image-20250608165749230.png)

测例 2: 两个主机连接同一个虚拟网络，在连接过程中停用虚拟网络之后再启用虚拟网络，查看是否能够正常连接

* 网络名称: abc
* 网络密码: abcd1234
* 开启 DHCP: ON
* 网络方式: 手动 tcp://baka9.vip:60002
* 预期状态: 停用之后主机无法连接到虚拟网络，再次开启之后主机自动连接虚拟网络。
* 实际结果: 停用之后主机无法连接到虚拟网络，再次开启之后主机自动连接虚拟网络。

![image-20250608165930219](/assets/test-GUI-2/image-20250608165930219.png)

## 连接虚拟网络后删除再添加虚拟网络测试

测例 1: 两个主机连接同一个虚拟网络，在连接过程中删除虚拟网络，查看是否能够正常连接

* 网络名称: abc
* 网络密码: abcd1234
* 开启 DHCP: ON
* 网络方式: 手动 tcp://baka9.vip:60002
* 预期状态: 删除之后主机无法连接到虚拟网络。
* 实际结果: 删除之后主机无法连接到虚拟网络，但是两个主机的 GUI 可能会出现连接数为 1 或者之间连接数之间跳，连接不到虚拟网络。

![image-20250608170017594](/assets/test-GUI-2/image-20250608170017594.png)

测例 2: 两个主机连接同一个虚拟网络，在连接过程中删除虚拟网络之后再创建相同网络名称和网络密码的虚拟网络，查看是否能够自动连接

* 网络名称: abc
* 网络密码: abcd1234
* 开启 DHCP: ON
* 网络方式: 手动 tcp://baka9.vip:60002
* 预期状态: 删除之后主机无法连接到虚拟网络，再次创建之后主机自动连接虚虚拟网络。
* 实际结果: 删除之后主机无法连接到虚拟网络，再次创建之后主机自动连接虚拟网络。

![image-20250608170055868](/assets/test-GUI-2/image-20250608170055868.png)

测例 3: 两个主机连接同一个虚拟网络，在连接过程中删除虚拟网络之后再创建相同网络名称和不同网络密码的虚拟网络，查看是否能够自动连接

* 网络名称: abc
* 网络密码: abcd1234
* 开启 DHCP: ON
* 网络方式: 手动 tcp://baka9.vip:60002
* 预期状态: 删除之后主机无法连接到虚拟网络，再次创建之后主机连接不上虚拟网络。
* 实际结果: 删除之后主机无法连接到虚拟网络，不能够自动连接虚拟网络。

![image-20250608170146902](/assets/test-GUI-2/image-20250608170146902.png)

测例 4: 两个主机连接同一个虚拟网络，在连接过程中删除虚拟网络之后再创建相同网络名称和不同网络密码的虚拟网络，之后再将网络密码改回查看是否能够自动连接

* 网络名称: abc
* 网络密码: abcd1234
* 开启 DHCP: ON
* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 删除之后主机无法连接到虚拟网络，再次创建之后主机连接不上虚拟网络，更改密码至与删除前相同，主机能够自动连接到虚拟网络。
* 实际结果: 删除之后主机无法连接到虚拟网络，再次创建之后主机连接不上虚拟网络，更改密码至与删除前相同，主机能够自动连接到虚拟网络，能够重新连接到虚拟网络。

![image-20250608170259954](/assets/test-GUI-2/image-20250608170259954.png)

## 运行中更改 IP 测试

测例 1: 运行中将前端分配的 IP 地址由 192.168.100.0 改为 192.168.200.0 查看已经连接虚拟网络的主机分配的 IP 变化

* 网络名称: abc
* 网络密码: abcd1234
* 开启 DHCP: ON
* 网络方式: 手动 tcp://baka9.vip:60002
* 预期状态: 主机分配的虚拟ip应随着服务器ip更改而更改
* 实际结果: 当主机与虚拟机连接至同一虚拟网络后，若在前端修改分配的 IP 段，仅将主机重新连接虚拟网络而虚拟机保持连接状态，会出现主机与虚拟机的虚拟 IPv4 地址持续变动的情况。此时，需断开虚拟网络中所有连接主机的连接后重新连接，或在前端更改 IP 段后将虚拟网络禁用并重新启动，方可使 IP 地址稳定。

![image-20250608170435906](/assets/test-GUI-2/image-20250608170435906.png)

![image-20250608170439286](/assets/test-GUI-2/image-20250608170439286.png)

![image-20250608170442308](/assets/test-GUI-2/image-20250608170442308.png)

![image-20250608170446571](/assets/test-GUI-2/image-20250608170446571.png)

测例 2: 运行中将前端分配的 IP 关闭 DHCP, 查看两个主机分配的虚拟 IP 变化，开启 DHCP 时分配的 IP 段为 192.168.100.0

* 网络名称: abc

* 网络密码: abcd1234

* 开启 DHCP: ON

* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 主机分配的虚拟ip变为默认，因为一开始就是默认值所以不会产生变化。

* 实际结果: 发现关闭 DHCP 后服务器还是默认的 ip192.168.100.0，两个主机之间的连接正常。

![image-20250608170520331](/assets/test-GUI-2/image-20250608170520331.png)

![image-20250608170523364](/assets/test-GUI-2/image-20250608170523364.png)

测例 3: 运行中将前端分配的 IP 关闭 DHCP, 查看两个主机分配的虚拟 IP 变化，开启 DHCP 时分配的 IP 段为 192.168.200.0

* 网络名称: abc

* 网络密码: abcd1234

* 开启 DHCP: ON

* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 主机分配的虚拟ip变为默认，但是默认值与分配的ip不同所以主机分配的ip会随着改变。

* 实际结果: 尝试主机和虚拟机连接到同一个虚拟网络，通过前端更改服务器 IP 段，当主机和虚拟机都重联之后再次将 DHCP 关闭之后主机重新连接而虚拟机保持之前的连接发现主机和虚拟机分配的虚拟IP地址还在不断变化，需要所有连接在虚拟网络的主机都断开后重联，或者前端更改ip段之后将虚拟网络禁用再重新启动，才能够稳定ip。

![image-20250608170554713](/assets/test-GUI-2/image-20250608170554713.png)

![image-20250608170557530](/assets/test-GUI-2/image-20250608170557530.png)

![image-20250608170600252](/assets/test-GUI-2/image-20250608170600252.png)

## 连接过程中更改套餐测试

测例 1: 在连接过程中进行套餐升级（青铜到白银）查看虚拟网络连接情况

* 网络名称: abc

* 网络密码: abcd1234

* 开启 DHCP: ON

* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 套餐升级不会改变虚拟网络连接情况，仪表盘中对应的网络流量增多。

* 实际结果: 在主机和虚拟机连接虚拟网络之后对虚拟网络进行套餐升级（青铜到白银），虚拟网络连接正常。

![image-20250608170646211](/assets/test-GUI-2/image-20250608170646211.png)

![image-20250608170650411](/assets/test-GUI-2/image-20250608170650411.png)

![image-20250608170652522](/assets/test-GUI-2/image-20250608170652522.png)

测例 2: 在连接过程中进行套餐升级（白银到黄金）查看虚拟网络连接情况

* 网络名称: abc

* 网络密码: abcd1234

* 开启 DHCP: ON

* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 套餐升级不会改变虚拟网络连接情况，仪表盘中对应的网络流量增多。

* 实际结果: 在主机和虚拟机连接虚拟网络之后对虚拟网络进行套餐升级（白银到黄金），虚拟网络连接正常。

![image-20250608170729702](/assets/test-GUI-2/image-20250608170729702.png)

![image-20250608170756924](/assets/test-GUI-2/image-20250608170756924.png)

## 局域网业务与仪表显示测试

![image-20250608170923313](/assets/test-GUI-2/image-20250608170923313.png)

测例 1: 两个主机连接同一个虚拟网络，通过局域网共享文件夹方式，查看小文件（93MB)传输流量与仪表盘流量使用是否契合

* 网络名称: abc

* 网络密码: abcd1234

* 开启 DHCP: ON

* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 通过局域网业务通过文件夹共享文件夹的方式，从主机向虚拟机传输小文件，仪表盘流量记录的流量大小与文件大小几乎相同

* 实际结果: 发现仪表盘流量与通过局域网共享文件的实际流量相差较近

![image-20250608170956676](/assets/test-GUI-2/image-20250608170956676.png)

![image-20250608170958945](/assets/test-GUI-2/image-20250608170958945.png)

测例 2: 两个主机连接同一个虚拟网络，通过局域网共享文件夹方式，查看大文件（2.34GB)传输流量与仪表盘流量使用是否契合

* 网络名称: abc

* 网络密码: abcd1234

* 开启 DHCP: ON

* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 通过局域网业务通过文件夹共享文件夹的方式，从主机向虚拟机传输大文件，仪表盘流量记录的流量大小与文件大小几乎相同

* 实际结果: 发现仪表盘流量与通过局域网共享文件的实际流量相差较近

![image-20250608171053450](/assets/test-GUI-2/image-20250608171053450.png)

![image-20250608171056503](/assets/test-GUI-2/image-20250608171056503.png)

## 流量已经用完能否正常加入虚拟网络测试

测例 1: 测试将仪表盘中流量用完时，主机是否会从服务器中断联

* 网络名称: abc

* 网络密码: abcd1234

* 开启 DHCP: ON

* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 流量用完之后，主机会从服务器中断开，且无法正常加入服务器

* 实际结果: 当流量用完时，主机会被虚拟机踢出，且传输终止，发送接收也终止

![image-20250608171208795](/assets/test-GUI-2/image-20250608171208795.png)

![image-20250608171211790](/assets/test-GUI-2/image-20250608171211790.png)

测例 2: 测试当仪表盘中流量用完之后能否连接到虚拟网络

* 网络名称: abc

* 网络密码: abcd1234

* 开启 DHCP: ON

* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 流量用完之后，主机会从服务器中断开，且无法正常加入服务器

* 实际结果: 当流量用完时，主机会被虚拟机踢出，且传输终止，发送接收也终止, 无法连接到虚拟网络当仪表盘流量用完时无法连接到虚拟网络

![image-20250608171245538](/assets/test-GUI-2/image-20250608171245538.png)

## 重连接测试

测例 1: 测试通过 GUI 能否可以同时连接一个虚拟网络多次

* 网络名称: abc

* 网络密码: abcd1234

* 开启 DHCP: ON

* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 一个主机只能连接到一个虚拟网络内一次

* 实际结果: 发现通过多次添加相同网络可以让一个主机连接到虚拟网络多次

![image-20250608171348776](/assets/test-GUI-2/image-20250608171348776.png)

测例 2: 测试前端创建多个虚拟网路，通过 GUI 添加新网络能否实现一个主机同时连接多个虚拟网络的效果

* 网络名称: abc

* 网络密码: abcd1234

* 开启 DHCP: ON

* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 一个主机只能连接一个虚拟网络

* 实际结果: 发现一个主机的确可以添加多个虚拟网络，但是当动态分配的虚拟网络可能重合时，后添加的虚拟网络实际上只是连接而没有分配动态ip地址

![image-20250608171422904](/assets/test-GUI-2/image-20250608171422904.png)

![image-20250608171425634](/assets/test-GUI-2/image-20250608171425634.png)

测例 3: 测试前端创建多个虚拟网路，通过 GUI 添加新网络能否实现一个主机同时连接多个虚拟网络，但是后接入的虚拟网络关闭 DHCP，而是手动更改虚拟ip避免与第一个虚拟网络重合时连接情况。

* 网络名称: abc

* 网络密码: abcd1234

* 开启 DHCP: ON

* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 主机分配的虚拟ip要与服务器适配

* 实际结果: 发现一个主机可以同时连接多个虚拟网络，分配的虚拟网络不重合时，能够同时成功连接虚拟网络且同时给一个主机赋予不同的虚拟ip地址

![image-20250608171526084](/assets/test-GUI-2/image-20250608171526084.png)

![image-20250608171528781](/assets/test-GUI-2/image-20250608171528781.png)

## 手机端连接虚拟网络测试

测例 1: 手机端连接虚拟网络测试。

* 网络名称: abc

* 网络密码: abcd1234

* 开启 DHCP: ON

* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 手机端能够成功与主机连接在同一个虚拟网络中

* 实际结果: 手机段成功连接到虚拟网络中，前端显示有主机和手机两个连接。

![image-20250608171634612](/assets/test-GUI-2/image-20250608171634612.png)

![image-20250608171638955](/assets/test-GUI-2/image-20250608171638955.png)

测例 2: 手机端连接虚拟网络测试

* 网络名称: abc

* 网络密码: abcd1234

* 开启 DHCP: ON

* 网络方式: 手动 tcp://baka9.vip:60002

* 预期状态: 主机段能够成功ping到手机ip地址。

* 实际结果: 手机段成功连接到虚拟网络中，主机段能够成功ping到手机端ip地址

![image-20250608171705963](/assets/test-GUI-2/image-20250608171705963.png)

## 测试总结

本次测试于 5 月 30 日由J开展，围绕 GUI 连接过程中更改设置、仪表盘流量测试以及手机端测试等方面，对系统功能进行了全面且深入的评估。

### 一、测试结果概述

1. 最大连接数调整
   - 调至 1 时:可随机踢出 1 台主机，彼此无法 ping 通。
   - 增大时:主机正常连接。
2. 虚拟网络停用与启用
   - 停用后:主机断开虚拟网络，GUI 可能显示连接数异常（如为 1 或跳动）。
   - 重新启用后:主机自动连接。
3. 虚拟网络删除与重建
   - 删除后:主机断开网络，GUI 连接数异常跳动。
   - 重建相同名称 + 密码网络:主机自动连接。
   - 重建相同名称 + 不同密码网络:无法连接。
   - 改回原密码后:主机自动连接。
4. 运行中更改 IP
   - 更改 IP 段后:虚拟 IPv4 地址持续变动，需断开重连或禁用 / 重启虚拟网络稳定 IP。
   - 关闭 DHCP 特殊场景:
     - 原 IP 段为 192.168.100.0 时，关闭后 IP 不变，连接正常；
     - 原 IP 段为 192.168.200.0 时，关闭后 IP 波动，需重连或重启网络稳定。
5. 套餐升级影响
   - 青铜→白银 / 白银→黄金套餐:虚拟网络连接正常，网络流量统计增加。

### 二、问题与建议

#### （一）IP 地址稳定性问题

运行中更改 IP 地址段或关闭 DHCP 时，主机和虚拟机的虚拟 IP 地址会出现不稳定的情况。建议优化 IP 分配机制，当 IP 地址段更改或 DHCP 状态改变时，能够及时、稳定地为连接的主机分配新的 IP 地址，避免出现地址不断变化的问题。

##### 问题描述

当主机与虚拟机连接至同一虚拟网络后，若在前端修改分配的 IP 段，仅将主机重新连接虚拟网络而虚拟机保持连接状态，会出现主机与虚拟机的虚拟 IPv4 地址持续变动的情况。此时，需断开虚拟网络中所有连接主机的连接后重新连接，或在前端更改 IP 段后将虚拟网络禁用并重新启动，方可使 IP 地址稳定。

##### 图示解释

重进的主机显示

![image-20250608154018732](/assets/test-GUI-2/image-20250608154018732.png)

未退出的主机显示

![image-20250608154046911](/assets/test-GUI-2/image-20250608154046911.png)

间隔30s后截图

![image-20250608154103806](/assets/test-GUI-2/image-20250608154103806.png)

#### （二）主机重连接限制问题

目前一个主机可以通过多次添加相同网络连接到虚拟网络多次，与预期不符。建议在系统中添加对主机重连接的限制，确保一个主机只能连接到一个虚拟网络内一次。

##### 问题描述

当一台主机通过GUI多次添加相同虚拟网络连接时，会发现一台主机添加了虚拟网络多次，并且分配的不同的ip地址

##### 图示解释

通过图示可以发现，相同主机名的主机连接到一个虚拟网络abc多次

![image-20250608153624010](/assets/test-GUI-2/image-20250608153624010.png)

#### （三）虚拟网络重合问题

##### 问题描述

前端创建多个虚拟网络时，当动态分配的虚拟网络可能重合时，后添加的虚拟网络无法正常分配动态 IP 地址。建议开发团队优化虚拟网络分配算法，避免出现虚拟网络重合的情况，确保每个添加的虚拟网络都能正常分配 IP 地址。

##### 图示解释

可以看到，当连接网络名称为abc之后，再连接分配相同ip段的虚拟网络def就只能显示出连接状态而没有分配虚拟ip地址

![image-20250609175707589](/assets/test-GUI-2/image-20250609175707589.png)

![image-20250609175902230](/assets/test-GUI-2/image-20250609175902230.png)
